= Song A Day

Telegram bot that sends you a daily song to make you day happy!

== Run
=== Via gradle

[source,shell]
----
TELEGRAM_TOKEN=foo TELEGRAM_BOTUSERNAME=@bar ./gradlew run
----

== Send a song
[source,shell]
----
curl -i -X POST -d '{"url":"https://open.spotify.com/intl-es/track/0CtkjgZpkgnW7U6WmHsakD?si=b7fb070b9b2441c3"}' 'https://animated-meme-7wwp49w454frpv7-8080.app.github.dev/v1/send/song' -H 'Content-Type: application/json' -H 'authority: animated-meme-7wwp49w454frpv7-8080.app.github.dev'
----

In localhost
[source,shell]
----
curl -i -X POST -d '{"url":"https://open.spotify.com/intl-es/track/0CtkjgZpkgnW7U6WmHsakD?si=b7fb070b9b2441c3"}' 'http://localhost:8080/v1/send/song' -H 'Content-Type: application/json'
----

== Build docker image & run
=== Build docker image
[source,shell]
----
CONTAINER=$(docker ps -a | grep -i songaday | awk '{print $1}')
docker rm $CONTAINER
docker image rm songaday
docker build -t songaday:latest .
----
=== Remove existing container
[source,shell]
----
CONTAINER=$(docker ps -a | grep -i songaday | awk '{print $1}')
docker rm $CONTAINER
----
=== Run docker container with environment variables
[source,shell]
----
docker run --env TELEGRAM_TOKEN=foo --env TELEGRAM_BOTUSERNAME=@bar --expose 8080 --name mysongaday -it songaday
----

=== Publish docker image
[source,shell]
----
docker image tag songaday marcosflobo/songaday:1.0.0
docker image tag songaday marcosflobo/songaday:latest
docker push --all-tags marcosflobo/songaday
----

== Micronaut
- https://docs.micronaut.io/latest/guide/configurationreference.html
